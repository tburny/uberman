# Dockerfile for running uberman tests in isolated environment
# This provides filesystem isolation for high-volume property-based tests

FROM golang:1.24-alpine

# Install necessary tools
RUN apk add --no-cache \
    git \
    make \
    bash \
    ca-certificates

# Set working directory
WORKDIR /app

# Copy go module files first for better layer caching
COPY go.mod go.sum ./

# Download dependencies
RUN go mod download

# Copy source code
COPY . .

# Default command runs all tests
CMD ["go", "test", "-v", "./..."]
