# Ghost App Manifest for Uberman
# This manifest defines how to install and manage Ghost blog on Uberspace

[app]
name = "ghost"
type = "nodejs"
version = "5.x"
description = "Professional publishing platform built on Node.js"

[runtime]
language = "node"
version = "20"

[database]
type = "mysql"
required = true
# Database name will be automatically generated as ${USER}_ghost

[install]
method = "npm"
source = "ghost-cli"
command = "ghost install local --no-setup --no-start"
location = "app"

[web]
backend = "http"
port = 8080
document_root = ""

# Ghost service configuration
[[services]]
name = "ghost"
command = "node current/index.js"
directory = "app"
port = 8080
startsecs = 30
autorestart = true

[services.environment]
NODE_ENV = "production"
PORT = "8080"

[backup]
include = [
    "app/content/",
    "app/config.production.json"
]
exclude = [
    "app/content/logs/",
    "app/content/cache/",
    "tmp/"
]

# Configuration templates
[[templates]]
name = "config.production.json"
destination = "app/config.production.json"
